<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coverage Clarity Engine | Specialty Pharmacy Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen flex flex-col">

    <header class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-emerald-600 text-3xl font-bold">verified_user</span>
                <span class="font-bold text-xl tracking-tight text-slate-800">VeriScript <span class="text-emerald-600 font-medium text-lg italic">GLP-1 Network</span></span>
            </div>
            <div class="hidden md:flex items-center gap-6 text-sm font-medium text-slate-500">
                <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">lock</span> HIPAA Compliant</span>
                <span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">event</span> 2025 Plan Rules</span>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-3xl mx-auto w-full px-4 py-8 relative">
        
        <section id="intro-section" class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-slate-900 mb-2">Coverage Clarity Engine</h1>
            <p class="text-slate-600">Determine your GLP-1 insurance eligibility and 2025 copay probability in 60 seconds.</p>
        </section>

        <div id="form-container" class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden relative z-10">
            <div class="bg-slate-100 h-1.5 w-full">
                <div id="progress" class="progress-bar bg-emerald-500 h-full w-1/2"></div>
            </div>

            <form id="clarity-form" class="p-6 md:p-8">
                <div id="step-1" class="step-transition">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="bg-emerald-100 text-emerald-700 w-8 h-8 rounded-full flex items-center justify-center font-bold">1</div>
                        <h2 class="text-xl font-semibold">Clinical Profile</h2>
                    </div>

                    <div class="space-y-6">
                        <div>
                            <label for="medication" class="block text-sm font-medium text-slate-700 mb-2">Target Medication <span class="text-red-500">*</span></label>
                            <select id="medication" class="w-full bg-slate-50 border border-slate-300 rounded-lg p-3 text-slate-900 focus:ring-2 focus:ring-emerald-500" onchange="clearError('medication-error')">
                                <option value="" disabled selected>Select prescribed medication...</option>
                                <option value="Wegovy">Wegovy (Semaglutide)</option>
                                <option value="Zepbound">Zepbound (Tirzepatide)</option>
                                <option value="Mounjaro">Mounjaro (Tirzepatide - Type 2 Focus)</option>
                                <option value="Ozempic">Ozempic (Semaglutide - Type 2 Focus)</option>
                            </select>
                            <p id="medication-error" class="hidden mt-1 text-sm text-red-600 flex items-center gap-1"><span class="material-symbols-outlined text-sm">error</span> Please select a medication.</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="bmi" class="block text-sm font-medium text-slate-700 mb-2">Your Current BMI <span class="text-red-500">*</span></label>
                                <input type="number" id="bmi" step="0.1" placeholder="e.g. 31.5" class="w-full bg-slate-50 border border-slate-300 rounded-lg p-3" oninput="clearError('bmi-error')">
                                <p id="bmi-error" class="hidden mt-1 text-sm text-red-600 flex items-center gap-1"><span class="material-symbols-outlined text-sm">error</span> BMI is required.</p>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-2">Comorbidities <span class="text-red-500">*</span></label>
                                <div class="grid grid-cols-1 gap-2" id="comorbidity-group">
                                    <label class="flex items-center gap-2 text-sm text-slate-600 bg-slate-50 p-2 rounded border border-slate-200 cursor-pointer hover:border-emerald-300 transition-colors">
                                        <input type="checkbox" name="comorbidity" value="hypertension" class="w-4 h-4 accent-emerald-500" onchange="clearError('comorbidity-error')"> Hypertension
                                    </label>
                                    <label class="flex items-center gap-2 text-sm text-slate-600 bg-slate-50 p-2 rounded border border-slate-200 cursor-pointer hover:border-emerald-300 transition-colors">
                                        <input type="checkbox" name="comorbidity" value="diabetes" class="w-4 h-4 accent-emerald-500" onchange="clearError('comorbidity-error')"> Type 2 Diabetes
                                    </label>
                                    <label class="flex items-center gap-2 text-sm text-slate-600 bg-slate-50 p-2 rounded border border-slate-200 cursor-pointer hover:border-emerald-300 transition-colors">
                                        <input type="checkbox" name="comorbidity" value="pcos" class="w-4 h-4 accent-emerald-500" onchange="clearError('comorbidity-error')"> PCOS / Prediabetes
                                    </label>
                                    <label class="flex items-center gap-2 text-sm text-slate-600 bg-slate-50 p-2 rounded border border-slate-200 cursor-pointer hover:border-emerald-300 transition-colors">
                                        <input type="checkbox" name="comorbidity" value="none" class="w-4 h-4 accent-emerald-500" onchange="clearError('comorbidity-error')"> None / No known conditions
                                    </label>
                                </div>
                                <p id="comorbidity-error" class="hidden mt-1 text-sm text-red-600 flex items-center gap-1"><span class="material-symbols-outlined text-sm">error</span> Please select at least one option.</p>
                            </div>
                        </div>

                        <button type="button" onclick="nextStep(2)" class="w-full bg-slate-900 text-white font-semibold py-4 rounded-xl hover:bg-slate-800 transition-all shadow-lg">
                            Continue to Insurance <span class="material-symbols-outlined align-middle ml-1">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <div id="step-2" class="step-transition hidden">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="bg-emerald-100 text-emerald-700 w-8 h-8 rounded-full flex items-center justify-center font-bold">2</div>
                        <h2 class="text-xl font-semibold">Insurance & Location</h2>
                    </div>

                    <div class="space-y-6">
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            
                            <div class="md:col-span-2">
                                <label for="carrier" class="block text-sm font-medium text-slate-700 mb-2">Primary Medical Carrier <span class="text-red-500">*</span></label>
                                <select id="carrier" class="w-full bg-slate-50 border border-slate-300 rounded-lg p-3 text-slate-900 focus:ring-2 focus:ring-emerald-500" onchange="clearError('carrier-error')">
                                    <option value="" disabled selected>Select provider...</option>
                                    <option value="Aetna">Aetna</option>
                                    <option value="BCBS">Blue Cross Blue Shield</option>
                                    <option value="Cigna">Cigna</option>
                                    <option value="Medicare">Medicare</option>
                                    <option value="UnitedHealthcare">UnitedHealthcare</option>
                                    <option value="Other">Other / Commercial</option>
                                </select>
                                <p id="carrier-error" class="hidden mt-1 text-sm text-red-600 flex items-center gap-1"><span class="material-symbols-outlined text-sm">error</span> Required</p>
                            </div>

                            <div>
                                <label for="state" class="block text-sm font-medium text-slate-700 mb-2">State <span class="text-red-500">*</span></label>
                                <select id="state" class="w-full bg-slate-50 border border-slate-300 rounded-lg p-3 text-slate-900 focus:ring-2 focus:ring-emerald-500">
                                    <option value="" disabled selected>State</option>
                                    <option value="AL">AL</option><option value="AK">AK</option><option value="AZ">AZ</option><option value="AR">AR</option>
                                    <option value="CA">CA</option><option value="CO">CO</option><option value="CT">CT</option><option value="DE">DE</option>
                                    <option value="FL">FL</option><option value="GA">GA</option><option value="HI">HI</option><option value="ID">ID</option>
                                    <option value="IL">IL</option><option value="IN">IN</option><option value="IA">IA</option><option value="KS">KS</option>
                                    <option value="KY">KY</option><option value="LA">LA</option><option value="ME">ME</option><option value="MD">MD</option>
                                    <option value="MA">MA</option><option value="MI">MI</option><option value="MN">MN</option><option value="MS">MS</option>
                                    <option value="MO">MO</option><option value="MT">MT</option><option value="NE">NE</option><option value="NV">NV</option>
                                    <option value="NH">NH</option><option value="NJ">NJ</option><option value="NM">NM</option><option value="NY">NY</option>
                                    <option value="NC">NC</option><option value="ND">ND</option><option value="OH">OH</option><option value="OK">OK</option>
                                    <option value="OR">OR</option><option value="PA">PA</option><option value="RI">RI</option><option value="SC">SC</option>
                                    <option value="SD">SD</option><option value="TN">TN</option><option value="TX">TX</option><option value="UT">UT</option>
                                    <option value="VT">VT</option><option value="VA">VA</option><option value="WA">WA</option><option value="WV">WV</option>
                                    <option value="WI">WI</option><option value="WY">WY</option>
                                </select>
                                <p id="state-error" class="hidden mt-1 text-sm text-red-600 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-sm">error</span> Required
                                </p>
                            </div>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 mb-6">
                            <label for="member-id" class="block text-sm font-medium text-slate-700 mb-1">
                                Member ID / Policy Number <span class="text-slate-400 font-normal">(Optional)</span>
                            </label>
                            
                            <div class="relative">
                                <input type="text" id="member-id" placeholder="e.g. W123456789" class="w-full bg-white border border-slate-300 rounded-lg p-3 pl-10 text-slate-900 focus:ring-2 focus:ring-blue-500 outline-none uppercase tracking-widest">
                                <span class="material-symbols-outlined absolute left-3 top-3.5 text-slate-400 text-xl">id_card</span>
                            </div>
                            
                            <p class="text-xs text-blue-600 mt-2 flex items-start gap-1">
                                <span class="material-symbols-outlined text-sm shrink-0">info</span>
                                <span>Providing your ID allows us to verify your exact $25 copay. Without it, we provide a standard estimate.</span>
                            </p>
                        </div>

                        <div class="flex gap-4">
                            <button type="button" onclick="nextStep(1)" class="flex-1 border border-slate-300 text-slate-600 font-semibold py-4 rounded-xl hover:bg-slate-50">Back</button>
                            
                            <button type="submit" id="submit-btn" class="flex-[2] bg-emerald-600 text-white font-bold py-4 rounded-xl hover:bg-emerald-700 shadow-lg flex items-center justify-center gap-2">
                                Check Coverage Now <span class="material-symbols-outlined">analytics</span>
                            </button>
                        </div>
                    </div>
                </div>

            </form>
        </div>

        <div id="safety-stop-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center px-4">
            <div class="absolute inset-0 bg-slate-900/60 blur-backdrop"></div>
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative z-10">
                <div class="bg-slate-100 text-slate-600 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="material-symbols-outlined text-2xl">block</span>
                </div>
                <h2 class="text-2xl font-bold text-center text-slate-900 mb-2">Clinical Criteria Not Met</h2>
                <p class="text-center text-slate-600 text-sm mb-6">
                    Based on FDA guidelines, GLP-1 medications typically require a BMI ≥ 27. Your profile indicates you may not qualify for insurance coverage for these specific medications.
                </p>
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 mb-6">
                    <h4 class="font-bold text-slate-800 text-sm mb-2">Recommended Alternative:</h4>
                    <p class="text-xs text-slate-600">Our Metabolic Lifestyle Coaching program is available without a prescription.</p>
                </div>
                <a href="#" class="block w-full bg-slate-900 text-white text-center font-bold py-3 rounded-xl hover:bg-slate-800">
                    View Lifestyle Programs
                </a>
            </div>
        </div>

        <div id="loading-state" class="hidden flex flex-col items-center justify-center py-20">
            <div class="spinner mb-6"></div>
            <h3 id="loading-text" class="text-lg font-bold text-slate-800 transition-all duration-300">Accessing 2025 Payer Formularies...</h3>
            <div class="w-64 h-2 bg-slate-100 rounded-full mt-4 overflow-hidden">
                <div id="loading-bar" class="h-full bg-emerald-500 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <div id="email-gate" class="hidden fixed inset-0 z-[60] flex items-center justify-center px-4">
            <div class="absolute inset-0 bg-slate-900/60 blur-backdrop"></div>
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative z-10">
                <div class="text-center mb-6">
                    <div class="bg-emerald-100 text-emerald-600 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="material-symbols-outlined text-2xl">lock</span>
                    </div>
                    <h2 class="text-xl font-bold text-slate-900">Analysis Complete</h2>
                    <p class="text-slate-600 mt-2 text-sm">
                        We found a potential coverage pathway for your medication.
                    </p>
                </div>
                
                <form id="email-form" class="space-y-4">
                    <div>
                        <input type="email" id="user-email" required placeholder="name@example.com" class="w-full bg-slate-50 border border-slate-300 rounded-xl p-4 text-slate-900 focus:ring-2 focus:ring-emerald-500 outline-none">
                    </div>
                    
                    <label class="flex items-start gap-3 cursor-pointer group p-2">
                        <input type="checkbox" required class="mt-1 w-4 h-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500 accent-emerald-600">
                        <span class="text-xs text-slate-500 group-hover:text-slate-700 transition-colors leading-tight">
                            I authorize VeriScript to disclose my health profile to its pharmacy network to verify benefits under HIPAA.
                        </span>
                    </label>

                    <button type="submit" class="w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-slate-800 shadow-lg flex items-center justify-center gap-2">
                        Unlock My Full Fee Report <span class="material-symbols-outlined text-sm">lock_open</span>
                    </button>
                </form>
            </div>
        </div>

        <div id="results-container" class="hidden max-w-2xl mx-auto">
            
            <div id="result-green" class="hidden bg-white rounded-2xl shadow-xl border-2 border-emerald-500 p-8 text-center">
                <div class="bg-emerald-100 text-emerald-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="material-symbols-outlined text-4xl">check_circle</span>
                </div>
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Match Found!</h2>
                
                <div class="bg-emerald-50 p-4 rounded-xl border border-emerald-100 inline-block mb-6">
                    <p class="text-xs uppercase tracking-wide text-emerald-800 font-bold">With Savings Card</p>
                    <p class="text-4xl font-bold text-emerald-600">$25.00<span class="text-sm font-normal text-slate-500">/mo</span></p>
                </div>
                <p class="text-slate-600 mb-8 max-w-md mx-auto">Your carrier indicates favorable coverage. We can likely process this immediately using the manufacturer savings card logic.</p>
                <a href="#" class="block w-full bg-emerald-600 text-white font-bold py-4 rounded-xl hover:bg-emerald-700 shadow-lg shadow-emerald-200 transition-all">
                    Finalize My Clinical Intake
                </a>
            </div>

            <div id="result-yellow" class="hidden bg-white rounded-2xl shadow-xl border-2 border-amber-400 p-8 text-center">
                <div class="bg-amber-100 text-amber-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="material-symbols-outlined text-4xl">assignment_late</span>
                </div>
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Verification Pending</h2>
                <p class="text-amber-600 font-medium mb-6">Pharmacist-Led Manual Review Required</p>
                <p class="text-slate-600 mb-8 max-w-md mx-auto text-sm">Your unique profile and carrier (Aetna/Cigna/UHC) require a Prior Authorization submission. Our team specializes in securing approval for these cases.</p>
                <a href="#" class="block w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-slate-800 shadow-lg transition-all">
                    Finalize My Clinical Intake
                </a>
            </div>

            <div id="result-red" class="hidden bg-white rounded-2xl shadow-xl border-2 border-slate-200 p-8 text-center">
                <div class="bg-slate-100 text-slate-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="material-symbols-outlined text-4xl">policy</span>
                </div>
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Insurance Coverage Unlikely</h2>
                <p class="text-slate-500 font-medium mb-6 text-sm">Government Plan Exclusion (Statutory)</p>
                
                <div class="bg-slate-50 p-4 rounded-xl mb-6 border border-slate-200">
                    <p class="text-xs uppercase tracking-wide text-slate-500 font-bold mb-1">Recommended Alternative</p>
                    <p class="text-slate-800 font-bold text-lg">Compound Program: $199/mo</p>
                    <p class="text-slate-400 text-xs mt-1">(Includes Provider & Medication)</p>
                </div>
                <a href="#" class="block w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-slate-800 shadow-lg transition-all">
                    View Cash Options
                </a>
            </div>

            <div id="result-grey" class="hidden bg-white rounded-2xl shadow-xl border-2 border-blue-400 p-8 text-center">
                <div class="bg-blue-100 text-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="material-symbols-outlined text-4xl">medical_services</span>
                </div>
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Specialist Review Required</h2>
                <p class="text-blue-600 font-medium mb-6">Pending: Clinical Nuance Detected</p>
                <p class="text-slate-600 mb-8 max-w-md mx-auto text-sm">Your profile is unique. Due to volatile 2025 insurance rules for [Carrier], a human pharmacist must manually verify your documentation.</p>
                <a href="#" class="block w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-slate-800 shadow-lg transition-all">
                    Request Priority Review
                </a>
            </div>

        </div>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-12 px-4 mt-auto no-print">
        <div class="max-w-4xl mx-auto text-center">
            <p class="text-xs text-slate-400 leading-relaxed">
                This tool provides an estimate based on 2025 formulary data. Final coverage is determined by your insurer. This is not a guarantee of payment. VeriScript operates as a clinical intermediary.
            </p>
            <div class="mt-4 flex justify-center gap-4 text-[10px] text-slate-400 uppercase tracking-widest font-bold">
                <span>HIPAA Compliant</span>
                <span>•</span>
                <span>AES-256 Encrypted</span>
                <span>•</span>
                <span>2025 Updated</span>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>