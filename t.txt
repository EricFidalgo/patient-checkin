I have the research findings for 3 carriers: Tricare, Kaiser, Humana.

Task 1: Update config.json Create a JSON object for these carriers that fits this exact schema. Do not deviate from this structure:

JSON

"[CARRIER_NAME]": {
  "id": "unique_id",
  "default_status": "yellow",
  "member_id_validation": {
    "regex": "^[A-Z]{3}\\d{9}$", // Example regex from research
    "min_length": 8,
    "max_length": 15,
    "help_text": "Must start with 3 letters..."
  },
  "rules": [
    {
      "if": {
        "planSource": "marketplace", // OPTIONAL: Only checks if planSource matches
        "bmi_min": 35, // OPTIONAL: Only checks if BMI is below this
        "has_med_history": false, // OPTIONAL
        "missing_comorbidities": ["diabetes"] // OPTIONAL
      },
      "then": {
        "status": "red",
        "reason": "Marketplace plans exclude GLP-1s in 2026."
      }
    }
    // Add more rules based on the research findings
  ],
  "pricing": {
    "green_copay": 25,
    "lifestyle_program_discount": true // true if research said program enrollment lowers price
  }
}
Task 2: Update logic.js Write a JavaScript snippet to handle the specific logic quirks found in these research outputs (e.g., if one carrier has a weird rule about "Lifestyle Programs").

Here are the Research Outputs: 
### **Coverage Verification Engine Audit: Tricare (2026 Plan Year)**

**Executive Summary:**
As of **August 31, 2025**, Tricare implemented a major eligibility split. **Tricare For Life (TFL)** beneficiaries (Medicare-eligible retirees) have **lost all coverage** for weight loss medications (Red Light). For **Tricare Prime and Select** (Active Duty & Dependents), coverage remains available but is strictly gated by Prior Authorization (PA) and Step Therapy (Yellow Light).

---

### **1. Coverage Logic (If/Else Rules)**

**Input Variables:** `Plan Source`, `Medication`, `Comorbidities`, `Medication History`, `Age`

#### **Rule Set A: Eligibility & Plan Exclusion (The "Tricare For Life" Cliff)**

> **Context:** Tricare has aligned with Medicare's statutory exclusion of weight loss drugs for TFL beneficiaries.

* **IF** Plan Source = "Govt (Medicare/Tricare for Life)" **AND** Medication = [Wegovy, Zepbound, Saxenda, Qsymia, Contrave] **THEN** Status = **RED**.
* *Reason:* "As of August 31, 2025, coverage for weight loss medications will no longer be available for non-TRICARE Prime and non-TRICARE Select beneficiaries."


* **IF** Plan Source = "Govt (Tricare Prime/Select)" **THEN** Proceed to Rule Set B.

#### **Rule Set B: Weight Loss Medication Gates (Wegovy, Zepbound, Saxenda)**

> **Context:** For Prime/Select members, coverage is conditional (Yellow).

* **IF** Medication = [Wegovy, Zepbound, Saxenda] **AND** BMI < 30 **AND** Comorbidities = [None] **THEN** Status = **RED**.
* **IF** Medication = "Compounded Semaglutide/Tirzepatide" **THEN** Status = **RED**.
* *Reason:* Tricare strictly covers only FDA-approved products; compounded versions are considered "off-label" and non-formulary/excluded.


* **IF** Medication History DOES NOT INCLUDE [Phentermine, Qsymia, Contrave] **THEN** Status = **YELLOW** (Step Therapy Required).
* *Reason:* PA criteria require the patient to have "tried and failed or have a contraindication to" oral weight loss agents (Qsymia, Contrave, Phentermine) before approving GLP-1s.


* **IF** Medication History INCLUDES [Phentermine, Qsymia, OR Contrave] **THEN** Status = **YELLOW** (PA Required, but Step Therapy Met).
* *Note:* Even with step therapy met, a PA is still required to verify participation in a lifestyle program (see below).



#### **Rule Set C: Diabetes Medication Gates (Ozempic, Mounjaro, Trulicity)**

* **IF** Comorbidities DOES NOT INCLUDE "Type 2 Diabetes" **THEN** Status = **RED** (Off-label use denied).
* *Reason:* Tricare strictly enforces on-label use for T2D meds. They will *not* cover Ozempic for weight loss alone.


* **IF** Comorbidities INCLUDES "Type 2 Diabetes" **THEN** Status = **YELLOW** (PA Required).
* *Reason:* PA is required to confirm T2D diagnosis and rule out Type 1.



#### **Rule Set D: Lifestyle Program Gating**

* **IF** User is seeking [Wegovy, Zepbound] **AND** Status != RED **THEN** Status = **YELLOW** (Requires "Lifestyle Program" Proof).
* *Requirement:* The PA form requires documentation of "participation in a comprehensive weight management program" (diet, exercise, and behavioral modification) for at least 6 months prior to or concurrent with therapy.
* *Clarification:* Unlike some commercial plans, Tricare does not currently mandate a *specific* vendor (like Omada), but the doctor must certify participation in *a* program.



---

### **2. Pricing Variables (2026 Updates)**

Tricare has increased copays for the 2026 calendar year.

| Service Channel | Drug Tier | 2026 Cost (Active Duty) | 2026 Cost (Retirees/All Others) |
| --- | --- | --- | --- |
| **Retail Pharmacy (30-day)** | Generic | $0 | **$16** |
|  | Brand Formulary (Wegovy/Zepbound) | $0 | **$48** |
|  | Non-Formulary | $0 | **$85** |
| **Mail Order (90-day)** | Generic | $0 | **$14** |
|  | Brand Formulary (Wegovy/Zepbound) | $0 | **$44** |
|  | Non-Formulary | $0 | **$85** |

* **Standard Copay:** **$48** (Retail / 30-day) for Brand Formulary drugs (Wegovy/Zepbound are typically Brand Formulary if PA is approved).
* **Coinsurance Shift:** Tricare typically uses flat copays, but **Non-Network** pharmacies will trigger a 50% cost-share (Point of Service option) or full cost.
* **Accumulator Adjustments:** Not applicable to Tricare (federal government payers generally ban the use of manufacturer coupons to lower the government's cost, and coupons cannot be applied to Tricare copays legally).

---

### **3. Member ID Logic (Validation)**

To avoid rejection errors, validate the **DBN** (DoD Benefits Number), not the DoD ID number.

* **Valid Length:** **11 Digits**
* **Required Pattern:** `^\d{9}-\d{2}$` (Often printed as 11 digits without the dash, or 9 digits + 2 digit suffix).
* *Note on Cards:* The ID is located on the **back** of the Uniformed Services ID card (labeled "DBN" or "Benefits Number"). Do **not** use the 10-digit DoD ID on the front.


* **Sponsor SSN:** Tricare also accepts the Sponsor's 9-digit SSN for claims processing if the DBN is unavailable.

---

### **4. 2026 Specific Warnings**

1. **The "TFL" Lockout:** The most critical update for 2026 is the hard exclusion of Tricare For Life beneficiaries from weight loss drug coverage. This population must pay 100% out-of-pocket (approx. $1,000+/mo) or seek VA coverage if eligible (veteran status separate from retiree status).
2. **Strict Renewal Criteria:** Renewal PAs for 2026 now strictly require documented weight loss (e.g., >5% body weight loss after 3 months). Failure to meet this metric results in coverage termination.
3. **Active Duty "Deployability":** For Active Duty Service Members (ADSM), being prescribed a GLP-1 may affect deployability status. It typically requires a waiver or a period of stability before deployment is authorized.

**Next Step:** Would you like me to generate the specific **JSON schema** or **SQL query** to implement these Tricare logic gates into your application's backend?


Based on a detailed audit of Kaiser Permanenteâ€™s 2025/2026 formularies and Clinical Policy Bulletins (CPBs) accessible as of December 2025, here is the logic for your coverage verification engine.

**Crucial 2026 Policy Update:**

> "Starting in January 2025, these medications will no longer be covered for the sole purpose of weight loss. If you're seeking GLP-1 or other anti-obesity medications for weight loss only, you'll be responsible for the cost."
> *Source: Kaiser Permanente Business "Your weight loss medication coverage" (Oct 2024 Update).*

This dictates a default **RED LIGHT** for most weight loss claims unless a specific employer "Weight Management Rider" is detected.

---

### 1. Coverage Logic (If/Else Rules)

**Rule Set A: Type 2 Diabetes (T2D) Logic**
*Applies to: Ozempic, Mounjaro, Rybelsus, Trulicity, Victoza*

* **IF** [Comorbidity] includes "Type 2 Diabetes":
* **IF** [Medication History] includes "Metformin":
* **THEN Status = Green**.
* *Reason:* Standard of care met. Mounjaro may still be Yellow (Tier 3) requiring failure of Ozempic/Trulicity on some regional plans.


* **IF** [Medication History] = NULL (No Metformin):
* **THEN Status = Yellow** (Requires Step Therapy).
* *Reason:* "On maximally tolerated metformin dose or intolerance is required." (Source: KP Northwest CPB for Ozempic).




* **IF** [Comorbidity] does **NOT** include "Type 2 Diabetes":
* **THEN Status = Red**.
* *Reason:* Off-label use for weight loss is strictly excluded/denied.



**Rule Set B: Weight Loss Logic**
*Applies to: Wegovy, Zepbound, Saxenda*

* **IF** [Plan Source] = "Marketplace (ACA)" OR "Govt (Medicare/Medicaid)":
* **THEN Status = Red**.
* *Reason:* "Excluded by default for ACA/Medicare plans in 2026." Medicare Part D statutorily excludes weight loss drugs.


* **IF** [Plan Source] = "Employer":
* **IF** [Rider Coverage] = FALSE (Default):
* **THEN Status = Red**.
* *Reason:* 2025/2026 Policy Update removes weight loss coverage from base medical plans.


* **IF** [Rider Coverage] = TRUE (Employer Opt-In):
* **Check Clinical Gates:**
* **IF** [BMI] < 27: **Status = Red**.
* **IF** [BMI]  30 OR ([BMI]  27 AND [Comorbidity] IN ["Hypertension", "High Cholesterol", "CVD", "OSA"]):
* **Check Step Therapy:**
* **IF** [Medication History] includes (2 of: "Phentermine", "Qsymia", "Contrave", "Orlistat"): **Status = Green** (Authorized).
* **ELSE**: **Status = Yellow** (Requires Step Therapy failure first).


* *Reason:* KP Northwest Zepbound criteria requires "failure of adequate trial to at least two" other agents.









**Rule Set C: Exclusions**

* **IF** [Medication] = "Compounded Semaglutide/Tirzepatide":
* **THEN Status = Red**.
* *Reason:* "Kaiser Permanente will only cover FDA-approved drugs... excludes experimental... and compounded drugs."



---

### 2. Pricing Variables

* **Standard Copay (Green Status):**
* **Commercial/Employer:** Typically **Tier 2 ($15-$30)** or **Tier 3 ($40-$60)** depending on plan "Metal" level.
* **Medicare (T2D only):** **$47** (Tier 3) or **Coinsurance (20-33%)**.
* **2026 Shift:** High-cost specialty drugs (Tier 4/5) are increasingly moving to **Coinsurance (e.g., 20% of cost)** rather than flat copays.


* **Red Light Price:**
* **Member Pay:** Full Cash Price (~$1,000 - $1,300/mo).


* **Lifestyle Program Impact:**
* **Discounts:** No direct copay discount found for enrolling in lifestyle programs.
* **Gating:** Enrollment in a program (e.g., KP's "Balance" or internal Medical Weight Management program) is often a **Clinical Gate (Yellow -> Green)** requirement, not a pricing discount mechanism.



---

### 3. Member ID Logic (Validation)

To prevent user error for Kaiser Permanente (KP) IDs.

* **Valid Length:** 7 to 11 digits.
* *Note:* Most regions use a 7-9 digit "Medical Record Number" (MRN). Some cards display 11 digits (MRN + 2 digit suffix).


* **Structure:** Purely numeric. No alpha prefixes.
* **Regex Pattern:**
```regex
^\d{7,11}$

```


*Input Mask suggestion: Allow user to enter 11 digits, but strip leading zeros if validation fails against a 7-digit DB.*

---

### 4. 2026 Specific Warnings

1. **"Sole Purpose" Exclusion:** Effective Jan 1, 2025 (continuing into 2026), GLP-1s for weight loss are **excluded** from base coverage. Status is Red unless a dedicated "Weight Management" rider is verified.
2. **Mounjaro Medicare Gap:** Mounjaro is **not** listed on the Kaiser Medicare Part D Formulary for 2025/2026 (Ozempic is preferred). Mounjaro = Red for Medicare unless a rigorous formulary exception is granted.
3. **Step Therapy Rigor:** Kaiser is stricter than most. They require failing **two** oral generic meds (e.g., Phentermine AND Topiramate) before granting a GLP-1 for weight loss, whereas many carriers only require one.


Based on the 2026 Clinical Policy Bulletins and Formulary updates for Humana (focusing on their primary markets: Medicare Advantage, Medicaid, and Military/Tricare, as they have exited the commercial employer market), here is the logic for your coverage verification engine.

### 1. Coverage Logic (If/Else Rules)

**A. The "Statutory Exclusion" Check (Medicare)**

> **Rule:** Medicare Part D plans are legally banned from covering drugs *solely* for weight loss. Exceptions exist only for specific non-weight indications (e.g., Heart Disease).

* **IF** [Plan Source] = "Govt (Medicare)" **AND** [Medication] = "Wegovy" **AND** [Comorbidity] does **NOT** include "Established CVD" **THEN** Status = **Red**.
* *Reason:* "Weight-loss-only prescriptions are excluded from Medicare Part D coverage... unless the drug has an FDA-approved indication beyond weight loss (e.g., cardiovascular risk reduction)."


* **IF** [Plan Source] = "Govt (Medicare)" **AND** [Medication] = "Zepbound" OR "Saxenda" OR "Contrave" **THEN** Status = **Red**.
* *Reason:* Zepbound and Saxenda do not yet have the "Cardiovascular Risk Reduction" indication approved by CMS for coverage; they remain classified strictly as weight loss agents.



**B. The "Cardiovascular" Exception (Wegovy on Medicare)**

* **IF** [Plan Source] = "Govt (Medicare)" **AND** [Medication] = "Wegovy" **AND** [Comorbidity] includes "Established CVD" **THEN** Status = **Yellow** (PA Required).
* *Reason:* Humana covers Wegovy for "reducing the risk of major adverse cardiovascular events (MACE) in adults with established cardiovascular disease," provided the user also meets BMI criteria.



**C. The "Diabetes Firewall" (GLP-1 Agonists)**

> **Rule:** Humana strictly polices the boundary between Type 2 Diabetes (T2D) and Obesity.

* **IF** [Medication] = "Ozempic" OR "Mounjaro" OR "Trulicity" OR "Victoza" OR "Rybelsus" **AND** [Comorbidity] does **NOT** include "Type 2 Diabetes" **THEN** Status = **Red**.
* *Reason:* "GLP-1s for diabetes are covered only for the treatment of Type 2 Diabetes. Off-label use for weight management is excluded."



**D. Tricare / Military Logic (The "Green Light" Path)**

> **Rule:** Humana Military (Tricare East) *does* cover weight loss meds but enforces strict Step Therapy.

* **IF** [Plan Source] = "Govt (Military)" **AND** [Medication History] includes ("Phentermine" OR "Qsymia" OR "Contrave") **THEN** Status = **Green**.
* *Reason:* Documented failure of a "Step 1" agent (Phentermine/Qsymia) often satisfies the PA requirement, moving the GLP-1 to approved status.


* **IF** [Plan Source] = "Govt (Military)" **AND** [Medication History] = "None" **THEN** Status = **Yellow** (Step Therapy Required).

**E. Compounded / Safety Exclusion**

* **IF** [Medication] = "Compounded Semaglutide/Tirzepatide" **THEN** Status = **Red**.
* *Reason:* Plan exclusion for "non-FDA approved compounded formulations" and "bulk powder variants."



**F. Commercial / Employer Status**

* **IF** [Plan Source] = "Employer" **THEN** Status = **Red** (Default/Warning).
* *Reason:* Humana has **exited** the Employer Group Commercial Medical Products business as of late 2025. Unless the user is on a legacy run-off plan or a specific administrative-only contract, valid commercial Humana coverage is unlikely to exist for 2026.



---

### 2. Pricing Variables

**Standard Copay (Medicare Part D 2026):**

* **Tier 1/2 (Generics/Metformin):** $0 - $5.
* **Tier 3 (Preferred Brand - e.g., Ozempic for T2D):** **$47** (approximate average).
* **Tier 4/5 (Non-Preferred/Specialty):** **33% - 50% Coinsurance**.

**The "IRA" Pricing Shift (CRITICAL for 2026):**

* **Logic:** IF Status = **Green** or **Yellow** (Approved) AND Total Year-to-Date Spend > $2,000 **THEN** Price = **$0**.
* *Reason:* The Inflation Reduction Act (IRA) caps Medicare Part D out-of-pocket costs at **$2,000** annually starting Jan 1, 2026. This effectively eliminates the "Donut Hole."

**Lifestyle Program Impact:**

* **Price Impact:** **No direct discount.** (Enrollment is a clinical gate to get coverage, not a coupon to lower the copay).
* **Red Light Price:** **~$1,000 - $1,300**. (The $199 target in your app likely refers to compounded cash prices; legitimate retail cash price for Zepbound/Wegovy is much higher).

---

### 3. Member ID Logic (Validation)

**Format 1 (Medicare Advantage - Most Common):**

* **Valid Length:** 11 Characters (Total)
* **Required Pattern:** Starts with **H** followed by 8 digits (Contract ID) + rarely 2 digits (PBP). *However, the card often displays just the Member ID.*
* **Card Display Pattern:** **H** + 8 Digits (e.g., `H12345678`) OR 9 Digits (Numeric).

**Format 2 (Legacy/Medicaid):**

* **Valid Length:** 9 to 10 Digits.
* **Required Pattern:** Numeric only.

**Regex for Validation:**
`^(H\d{8}|\d{9,10})$`

---

### 4. 2026 Specific Warnings

1. **Humana Commercial Exit:** If a user selects "Employer" and "Humana," flag this for review. Humana has ceased offering commercial medical insurance. The user may actually have **Tricare** (Military) or a **Group Medicare** plan.
2. **Medicare Coverage of Wegovy:** Do not Auto-Red Light Wegovy for Medicare users *if* they select "Heart Disease" or "Established CVD." This is the *only* pathway for coverage in 2026.
3. **Zepbound Lockout:** Zepbound currently has **NO** approved cardiovascular indication. Unlike Wegovy, it is strictly considered a weight loss drug and is **statutorily excluded** from all Humana Medicare plans for 2026.
4. **$2,000 Cap:** The logic engine must account for the $2,000 cap. A user on a 50% coinsurance tier (Tier 4) will hit this cap in roughly 4 months ($500/mo), making the medication free ($0) for the remaining 8 months of the year.